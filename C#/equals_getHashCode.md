# Equals, GetHashCode

**Equals** - это метод, с помощью которого мы можем сравнить 2 объекта одного типа на индетичность. Для этого нам нужно переопределить этот метод внутри класса. Внутри этого метода нам необходимо написать логику сравнения, по которой мы будем определять идентичность объектов. Допустим, у класса есть 5 полей, но только 3 из них значимые - мы сравниваем эти 3 поля между объектами этого типа, если они одинаковы - значит объекты одинаковы.

**GetHashCode** - это метод, который позволяет определить алгоритм вычисления хэша , которое будет соответствовать этому объекту. Обычно определяется как сумма хэшей всех полей этого класса.

`GetHashCode` работает намного быстрее, чем `Equals`. Именно `GetHashCode` используется в коллекциях. Например, в `Dictionary`.
У метода `GetHashCode` возможна коллизия - для одинаковых значений, хэши всегда будут одинаковы, но для разных значений хэши иногда могут быть одинаковыми. Если хэши разные - то объекты гарантированно разные.

`GetHashCode` используется для опитимизации сравнения, но не для сравнения (из-за коллизии). Т.к. `GetHashCode` работает быстро - он помогает нам пробежаться по коллекции и взять из неё только те объекты, у которых `GetHashCode` одинаков. БОльшая часть объектов будет отсечена. Останутся либо действительно равные, либо те, которые остались из-за вышеуказанной коллизии. И дальше мы проверяем оставшиеся объекты (отфильтрованные с помощью `GetHashCode`) на равенство через `Equals`, который работает намного медленнее, но который точно сравнивает и оставляет только одинаковые объекты. Таким образом, это ускоряет процесс извлечения идентичных объектов из коллекции.
Также при вычислении `hashCode` рекомендуется использовать простые числа, такие как 17, 23, 31 и тд. Это обеспечивает более случайное распределение и понижает вероятность коллизии при вычислении `hashCode` (см. выше). Наиболее удобным для использования является число 31, т.к. оно на 1 меньше 32, что удобно для побитовой оптимизации.